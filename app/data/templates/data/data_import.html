{% extends 'base.html' %}

{% block title %}Data Import{% endblock %}

{% block content %}
  <div class="container" style="margin-top: 3rem">
    {% autoescape off %}
      <p>{{ html | safe | escape  }}</p>
    {% endautoescape %}
    <form action="{% url 'data:data_import' %}"  method="post">
      {% csrf_token %}
      <label for="url" class="form-label">URL</label>
      <input type="text" name="url" id="url" placeholder="URL" class="form-control" aria-describedby="url-block">
      <div id="url-block" class="form-text">
        <p>URLを知っていれば入力してください。</p>
      </div>
      <input type="submit" value="送信" style="margin: 5px 0">
    </form>
  </div>
  <div class="container" style="margin-top: 3rem">
    <h2>URL</h2>
    <hr>
    <a href="{{ url }}" target="_blank" rel="noopener noreferrer">{{ url }}</a>
    <hr>
    {% autoescape on %}
    <h2>HTML</h2>
    {% endautoescape %}
    <hr>
    <form action="{% url 'data:extraction' %}"  method="post">
      {% csrf_token %}
      <label for="code" class="form-label">抽出</label>
      <input type="text" name="code" id="code" placeholder="コード" class="form-control" aria-describedby="code-block">
      <input hidden type="text" name="html" value="{{ html }}">
      <input hidden type="text" name="url" value="{{ url }}">
      <div id="code-block" class="form-text">
        <p>コードを入力してください。</p>
      </div>
      <input type="submit" value="送信" style="margin: 5px 0">
    </form>
    <hr>
    <h3>HTMLコード</h3>
    <p>{{ html | linebreaksbr }}</p>
    <br>
    <h3>HTMLページ</h3>
  </div>
{% endblock %}